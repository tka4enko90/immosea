!function(l){var r={_valid:!1,init:function(){r.hide_vatin_field(),l("#billing_company").length&&r.check_billing_company_input(),l("#billing_vat_field").length&&r.ajax_check_vat_field(),l("#billing_country").length&&r.billing_country_handle()},billing_country_handle:function(){l("#billing_country").ready(function(){l("#billing_country").trigger("change")}),l("#billing_country").change(function(){!wcvat_script_vars.base_country_hide&&1!=wcvat_script_vars.base_country_hide||(wcvat_script_vars.base_country==l("#billing_country").val()&&!wcvat_script_vars.show_for_basecountry_hide_eu_countries||""==l("#billing_country").val()?(l("#billing_vat").val("").trigger("blur"),l("#billing_vat_field").hide()):wcvat_script_vars.eu_countries.includes(l("#billing_country").val())?l("#billing_vat_field").show():(l("#billing_vat").val("").trigger("blur"),l("#billing_vat_field").hide()))})},hide_vatin_field:function(){},ajax_check_vat_field:function(){var e=!1;l("input#billing_vat").ready(function(){""!=l("input#billing_vat").val()&&l("input#billing_vat").trigger("blur")}),l("input#billing_vat").blur(function(i){if(1==e)return!1;e=!0;var n=l(this).val(),a=l(this);r.clean_up_badges(),a.after(wcvat_script_vars.spinner);var t={action:"wcvat_check_vat",vat:n,country:l("#billing_country").val()};l.ajax({data:t,url:wcvat_script_vars.ajaxurl,async:!0,dataType:"json"}).always(function(){r.clean_up_badges()}).done(function(i){i&&(!1===i.success?""!=n&&(a.addClass("error"),a.after(wcvat_script_vars.error_badge)):(l(".error-badge").remove(),a.after(wcvat_script_vars.correct_badge),r._valid=!0))}).always(function(){e=!1,l("body").trigger("update_checkout")})})},check_billing_company_input:function(){l("#billing_company").val().length;l(document).on("keyup","#billing_company",function(){l(this).val().length})},clean_up_badges:function(){l(".error-badge").remove(),l(".spinner-badge").remove(),l(".correct-badge").remove(),l(".spinner-badge").remove()}};l(document).ready(r.init)}(jQuery);