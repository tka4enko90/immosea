!function(r){var _={_valid:!1,init:function(){_.hide_vatin_field(),r("#billing_company").length&&_.check_billing_company_input(),r("#billing_vat_field").length&&_.ajax_check_vat_field(),r("#billing_country").length&&_.billing_country_handle()},billing_country_handle:function(){r("#billing_country").ready(function(){r("#billing_country").trigger("change")}),r(document).on("change","#billing_country",function(i){!wcvat_script_vars.base_country_hide&&1!=wcvat_script_vars.base_country_hide||(wcvat_script_vars.base_country==r("#billing_country").val()&&!wcvat_script_vars.show_for_basecountry_hide_eu_countries||""==r("#billing_country").val()?(r("#billing_vat").val("").trigger("blur"),r("#billing_vat_field").hide()):wcvat_script_vars.eu_countries.includes(r("#billing_country").val())?r("#billing_vat_field").show():(r("#billing_vat").val("").trigger("blur"),r("#billing_vat_field").hide()))})},hide_vatin_field:function(){},ajax_check_vat_field:function(){var e=!1;r("input#billing_vat").ready(function(){""!=r("input#billing_vat").val()&&r("input#billing_vat").trigger("blur")}),r(document).on("blur","input#billing_vat",function(i){if(1==e)return!1;e=!0;var n=r(this).val(),t=r(this);_.clean_up_badges(),t.after(wcvat_script_vars.spinner);var a={action:"wcvat_check_vat",vat:n,country:r("#billing_country").val()};r.ajax({data:a,url:wcvat_script_vars.ajaxurl,async:!0,dataType:"json"}).always(function(){_.clean_up_badges()}).done(function(i){i&&(!1===i.success?""!=n&&(t.addClass("error"),t.after(wcvat_script_vars.error_badge)):(r(".error-badge").remove(),t.after(wcvat_script_vars.correct_badge),_._valid=!0))}).always(function(){e=!1,wcvat_script_vars.trigger_update_checkout&&r("body").trigger("update_checkout")})})},check_billing_company_input:function(){r("#billing_company").val().length;r(document).on("keyup","#billing_company",function(){r(this).val().length})},clean_up_badges:function(){r(".error-badge").remove(),r(".spinner-badge").remove(),r(".correct-badge").remove(),r(".spinner-badge").remove()}};r(document).ready(_.init)}(jQuery);